- block:

    - block:

        - name: detect grub bootloader
          stat:
            path: /etc/default/grub
          register: bootloader_grub_stat_result

        - name: include grub
          include_tasks: grub.yml
          tags: bootloader_grub
          when: bootloader_grub_stat_result.stat.exists

      when: include_bootloader_grub

    - block:

        - name: detect extlinux (syslinux) bootloader
          stat:
            path: /syslinux.cfg
          register: bootloader_extlinux_stat_result

        - name: include extlinux (syslinux)
          include_tasks: extlinux.yml
          tags: bootloader_extlinux
          when: bootloader_extlinux_stat_result.stat.exists

      when: include_bootloader_extlinux

  tags: bootloader
